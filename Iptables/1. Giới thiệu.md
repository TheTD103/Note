# Một số tìm hiểu về iptables
**Iptables** là Firewall được cấu hình và hoạt động trên nền Console rất nhỏ và tiện dụng, **Iptables** do Netfilter Organiztion viết ra để tăng tính năng bảo mật trên hệ thống Linux. **Iptables** cung cấp các tính năng sau:
- **Tích hợp tốt với kernel của Linux**  
- **Có khả năng phân tích package hiệu quả:** `iptables` có thể kiểm tra và phân tích các gói tin dựa trên nhiều tiêu chí khác nhau như địa chỉ IP nguồn và đích, cổng nguồn và đích, giao thức sử dụng, và nhiều yếu tố khác. 
- **Lọc package dựa vào MAC và một số cờ hiệu trong TCP Header:** 
    - `iptables` có khả năng lọc gói tin dựa trên địa chỉ MAC, điều này rất hữu ích trong mạng LAN để kiểm soát các thiết bị cụ thể.
    - `iptables` cũng có thể lọc dựa trên các cờ trong TCP header như SYN, ACK, FIN, RST, giúp quản trị viên có thể kiểm soát các kết nối TCP một cách chi tiết.
- Cung cấp chi tiết các tùy chọn để ghi nhận sự kiện hệ thống. 
- Cung cấp kỹ thuật NAT. 
- Có khả năng ngăn chặn một số cơ chế tấn công theo kiểu DoS.
## 1. Các khái niệm
### 1.1. Tables (Bảng)
`iptables` có một số bảng, mỗi bảng chứa các chuỗi (chains) được sử dụng để xử lý các loại gói tin khác nhau
<div style="text-align: center;">
    <img src="https://i.imgur.com/zr5K2kB.jpg">
</div>

- **Filter:** Lọc gói dữi liệu
    - Quá trình bắt gói tin: Khi gói tin đến máy chủ, iptables sẽ kiểm tra các quy tắc trong chuỗi `INPUT`. Nếu gói tin phù hợp với một **chain**, hành động tương tứng sẽ được thực hiện.
    - Gồm 3 **chain**:
        - FORWARD CHAIN: lọc gói khi đi đến các server khác
        - Input chain: Lọc gói khi đi vào trong server
        - Output chain: Lọc gói khi ra khỏi server
    - Ví dụ:
    ```sh
        iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT  # Cho phép tất cả các kết nối từ mạng 192.168.1.0/24
        iptables -A INPUT -p tcp --dport 80 -j ACCEPT   # Cho phép các kết nối đến cổng 80 (HTTP)
        iptables -A INPUT -j DROP                       # Từ chối tất cả các kết nối khác
        ```
